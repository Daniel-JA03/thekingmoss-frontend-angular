<div class="container-fluid mt-4 px-4">
  <h2 class="mb-4 title">Panel de Control</h2>
<div class="row g-4 mb-4">
  <!-- Tarjeta: Total Productos -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border rounded shadow-sm bg-white border-left-warning h-100 d-flex flex-column">
      <div class="card-body d-flex align-items-center">
        <div class="flex-grow-1">
          <h5 class="text-warning text-uppercase mb-1 fw-bold">
            <i class="bi bi-cart-plus me-2"></i> Total Productos
          </h5>
          <div class="h5 mb-0 font-weight-bold text-gray-800">{{ totalProductos }}</div>
          <small class="text-muted">Actualmente registrados</small>
        </div>
        <div class="ms-auto">
          <i class="bi bi-box-seam-fill fs-3 text-warning opacity-25"></i>
        </div>
      </div>
      <div class="card-footer bg-transparent border-top-0 mt-auto">
        <a [routerLink]="['/admin/dashboard/listar-producto']" class="small stretched-link text-decoration-none text-warning fw-bold">
          Ver productos <i class="bi bi-arrow-right ms-1"></i>
        </a>
      </div>
    </div>
  </div>

  <!-- Tarjeta: Total Pedidos -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border rounded shadow-sm bg-white border-left-success h-100 d-flex flex-column">
      <div class="card-body d-flex align-items-center">
        <div class="flex-grow-1">
          <h5 class="text-success text-uppercase mb-1 fw-bold">
            <i class="bi bi-basket-fill me-2"></i> Total Pedidos
          </h5>
          <div class="h5 mb-0 font-weight-bold text-gray-800">{{ totalPedidos }}</div>
          <small class="text-muted">Pedidos acumulados</small>
        </div>
        <div class="ms-auto">
          <i class="bi bi-cart-check-fill fs-3 text-success opacity-25"></i>
        </div>
      </div>
      <div class="card-footer bg-transparent border-top-0 mt-auto">
        <a [routerLink]="['/admin/dashboard/listar-pedido']" class="small stretched-link text-decoration-none text-success fw-bold">
          Ver pedidos <i class="bi bi-arrow-right ms-1"></i>
        </a>
      </div>
    </div>
  </div>

  <!-- Tarjeta: Pedidos Generados -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border rounded shadow-sm bg-white border-left-primary h-100 d-flex flex-column">
      <div class="card-body d-flex align-items-center">
        <div class="flex-grow-1">
          <h5 class="text-primary text-uppercase mb-1 fw-bold">
            <i class="bi bi-clock-fill me-2"></i> Pedidos Generados
          </h5>
          <div class="h5 mb-0 font-weight-bold text-gray-800">{{ pedidosGenerados }}</div>
          <small class="text-muted">Últimas 24 horas</small>
        </div>
        <div class="ms-auto">
          <i class="bi bi-hourglass-split fs-3 text-primary opacity-25"></i>
        </div>
      </div>
      <div class="card-footer bg-transparent border-top-0 mt-auto">
        <a [routerLink]="['/admin/dashboard/listar-pedido']" class="small stretched-link text-decoration-none fw-bold">
          Ver detalles <i class="bi bi-arrow-right ms-1 "></i>
        </a>
      </div>
    </div>
  </div>
</div>


  <!-- Productos con bajo stock -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card bg-info text-white">
      <div class="card-header bg-info text-white">
        <h5>Productos con Bajo Stock (< 10 unidades)</h5>
      </div>
      <div class="card-body p-0">
        <div *ngIf="productosBajoStock.length > 0" class="table-responsive">
          <table class="table table-striped mb-0">
            <thead class="table-light">
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Stock</th>
                <th>Categoría</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let producto of productosBajoStock" 
                  (click)="editarProducto(producto)" 
                  style="cursor: pointer;">
                <td>{{ producto.idProducto }}</td>
                <td>{{ producto.nombreProducto }}</td>
                <td><span class="badge bg-danger">{{ producto.stock }}</span></td>
                <td>{{ producto.nombreCategoria }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        
      </div>
    </div>

    <div *ngIf="productosBajoStock.length === 0" class="text-center p-4 alert alert-info">
          No hay productos con bajo stock.
        </div>
  </div>
</div>

  <!-- Notificaciones -->
  <div class="row">
    <div class="col-12">
      <div class="card border-danger">
        <div class="card-header bg-danger text-white">
          <h5>Notificaciones</h5>
        </div>
        <div class="card-body">
          <p class="lead">
            <i class="bi bi-exclamation-triangle-fill text-danger"></i>
            {{ mensajeNotificacion }}
          </p>
          <button 
            class="btn btn-sm btn-outline-danger" 
            (click)="mostrarNotificaciones = !mostrarNotificaciones">
            {{ mostrarNotificaciones ? 'Ocultar' : 'Ver detalles' }}
          </button>
          <ul *ngIf="mostrarNotificaciones && productosSinImagen.length > 0" class="mt-2">
            <li *ngFor="let prod of productosSinImagen">
              Producto ID: {{ prod.idProducto }} - {{ prod.nombreProducto }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de creación/edición -->
<app-crear-produc
  [productoSeleccionado]="productoSeleccionado"
  (productoCreado)="cargarDatos()">
</app-crear-produc>