<div class="modal fade" id="detallePedidoModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    @if (pedido) {
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Detalle del Pedido</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <p><strong>ID Pedido:</strong> {{ pedido.pedidoId }}</p>
          <p><strong>Fecha:</strong> {{ pedido.fechaPedido | date: 'short' }}</p>
          <p><strong>Tipo de Entrega:</strong> {{ pedido.tipoEntrega }}</p>
          <p><strong>Información:</strong> {{ pedido.informacionPedido }}</p>
          <p><strong>Instrucciones:</strong> {{ pedido.instruccionEntrega }}</p>
          <p><strong>Estado:</strong> {{ pedido.tipoEstadoPedido }}</p>
          <p><strong>ID Usuario:</strong> {{ pedido.usuarioId }}</p>
          <div class="d-flex justify-content-between align-items-center mt-4">
            <h6>Productos del Pedido</h6>
            <button class="btn btn-sm btn-success" (click)="editarDetalle()">
              {{ pedido!.detalle!.length > 0 ? 'Editar Detalle' : 'Agregar Detalle' }}
            </button>
          </div>
          @if (pedido!.detalle!.length > 0) {
            <div>
              <table class="table table-bordered table-hover mt-2">
                <thead class="table-light">
                  <tr>
                    <th>Producto ID</th>
                    <th>Nombre</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Descuento</th>
                    <th>Total Línea</th>
                  </tr>
                </thead>
                <tbody>
                  @for (item of pedido.detalle; track item) {
                    <tr>
                      <td>{{ item.productoId }}</td>
                      <td>{{ item.nombreProducto }}</td>
                      <td>{{ item.cantidad }}</td>
                      <td>S/. {{ item.precioUnitario | number: '1.2-2' }}</td>
                      <td>S/. {{ item.descuento | number: '1.2-2' }}</td>
                      <td>S/. {{ item.lineaTotal | number: '1.2-2' }}</td>
                    </tr>
                  }
                </tbody>
              </table>
            </div>
          } @else {
            <div class="alert alert-warning mt-3">
              Este pedido no tiene detalles aún.
            </div>
          }
        </div>
      </div>
    }
  </div>
</div>
